{% extends "template.html" %}

{%block title%}Enter Patient Consent Form Details{% endblock %}

{% block body %}
    <div class="container">


        <h1><span class="secondary-heading"><i class="fas fa-vial"></i> New Sample</span> Enter Patient Consent Form Details</h1>
        {{ render_progress(2, 6) }}


        <p>Please replicate what the donor has checked on the physical consent sheet and press continue.</p>

        

        <form action="{{ url_for('sample.add_sample_pcf_data', hash=hash) }}" method="POST">
            {{ questionnaire.csrf_token() }}
            <div class="card">
                <div class="card-header">
                    <h2>{{ pcf.name }}</h2>
                </div>
                <ul id="#questionnaire-list" class="list-group list-group-flush">
                    {% for question in questionnaire %}
                    {% if (question.type == "BooleanField") %}
                        {{ render_question( question, loop.index0 ) }}
                    {% endif %}
                {% endfor %}
                </ul>
              </div>

            <button type="button" class="btn btn-primary float-right top10" data-toggle="modal" data-target="#confirmModal">
                Confirm
            </button>

            <div id="confirmModal" class="modal" tabindex="-1" role="dialog">
              <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <h3 class="modal-title">{{ pcf.name }}</h3>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body">
                      {{ questionnaire.csrf_token() }}
                      <div class="list-group" id="questionnaire-list">
                          <p>Please double check what you've entered before submitting.</p>
                          {% for question in questionnaire %}
                              {% if (question.type == "BooleanField") %}
                              <div id="list-question-{{loop.index0 + 1}}-m" class="list-group-item flex-column align-items-start">
                                  <div class="d-flex w-100 justify-content-between">
                                      <p class="mb-1">{{ question.label.text }}</p>
                                      <i class="fa fa-check-circle"></i>
                                  </div>
                              </div>
                              {% endif %}
                          {% endfor %}
                      </div>
                  </div>
                  <div class="model-footer" style="padding:10px;">
                    {{ form_field(questionnaire.submit) }}

                  </div>
                </div>
              </div>
            </div>
        </form>
    </div>
{% endblock %}

{% block javascript %}
    <script src="{{ url_for('static', filename='js/sample/information/add/step_two.js') }}"></script>
{% endblock %}
