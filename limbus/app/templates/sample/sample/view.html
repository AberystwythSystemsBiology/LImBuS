{% extends "template.html" %}

{% block title %}LIMBSMP-{{ sample["id"] }}{% endblock %}

{% block body %}
    <div class="container">

        <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pb-2 mb-3 border-bottom">
            <h2><i class="fas fa-vial"></i> LIMBSMP-{{ sample["id"] }}</h2>
            {% if sample.sample_status.value == "Destroyed" %}
              <div class='btn btn-danger pull-right'>Destroyed</div>
            {% elif sample.sample_status.value == "Available" %}
              <div class='btn btn-success pull-right'>Available</div>
            {% endif %}
        </div>



        <div class="row">
            <div class="col-sm-9">
              <div class="btn-toolbar form-group" role="toolbar" aria-label="Toolbar with button groups">
                <div class="btn-group mr-2" role="group" aria-label="First group">
                  <button type="button" class="btn btn-outline-dark" disabled><i class="fa fa-edit"></i> Edit</button>
                </div>
                {% if sample.sample_status.value == "Available" %}
                  <div class="btn-group mr-2" role="group" aria-label="Second group">
                    <button type="button" class="btn btn-outline-dark" disabled><i class="fa fa-code-branch"></i> Derive</button>
                  </div>
                  <div class="btn-group mr-2" role="group" aria-label="Third group">
                      <a href="{{ url_for('sample.aliquot', sample_id=sample["id"]) }}">
                        <button type="button" class="btn btn-outline-dark"><i class="fa fa-code-branch"></i> Aliquot</button>
                      </a>
                  </div>
                  {% endif %}
                  <div class="btn-group" role="group" aria-label="Third group">
                  <button type="button" class="btn btn-outline-dark" disabled><i class="fa fa-print"></i> Print</button>
                </div>
              </div>
              {{ show_value(sample["uuid"], "UUID", "text")  }}

              {{ show_value(sample["biobank_barcode"], "Biobank Barcode", "text")  }}
                {{ show_value(sample["collection_date"], "Collection Date", "datetime") }}
                {{ show_value(sample["sample_type"], "Sample Type", "text") }}
                {{ show_value(sample["quantity"], "Quantity", "text")  }}
                {{ show_value(sample["current_quantity"], "Current Quantity", "text") }}
            </div>
            <div class="col-sm-3">
              <div class="card">
                <div class="card-header">
                  <i class="fa fa-qrcode"></i> Sample Barcode
                </div>
                <div class="card-body" style="text-align: center;">
                  <div id="loading-barcode">
                    <div class="spinner-border" role="status">
                      <span class="sr-only">Loading...</span>
                    </div>
                    <p class="text-muted">Generating Barcode...</h4>
                  </div>
                  
                  <img src="" id="barcode">
                </div>

              </div>
              

            </div>
        </div>

    </div>
{% endblock %}

{% block javascript %}
    <script src="{{ url_for('static', filename='js/sample/information/view.js') }}"></script>
{% endblock %}